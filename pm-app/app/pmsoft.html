<!DOCTYPE html>
<html lang="en" ng-app="PMSoft">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PMSoft</title>
    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/bower_components/summernote/dist/summernote.css">
    <link rel="stylesheet" href="/styles/pm_master_page.css">
    <link rel="shortcut icon" href="/public/favicon.ico">
</head>
<body>
<header class="header" role="banner" ng-controller="PMController as PMCtrl">
    <div class="cell">
        <div class="header-logo">
            <a href="/">
                <img alt="PM-Soft" src="/public/PMSoft-LOGO.png"/>
            </a>
        </div>
        <nav class="nav header-nav">
            <div>
                <ul class="nav-list nav-list-object">
                    <li class="nav-list-item">
                        <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
                        <a class="nav-list-item-font" href="#/project">项目</a>
                        <div class="nav-list-item-font-mark"></div>
                    </li>
                    <li class="nav-list-item">
                        <span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>
                        <a class="nav-list-item-font" href="#/maintenance">维护</a>
                        <div class="nav-list-item-font-mark"></div>
                    </li>
                    <li class="nav-list-item">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                        <a class="nav-list-item-font" href="#/my-own">我的</a>
                        <div class="nav-list-item-font-mark"></div>
                    </li>
                    <li class="nav-list-item">
                        <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
                        <a class="nav-list-item-font" href="#/calendar1">日历</a>
                        <div class="nav-list-item-font-mark"></div>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="header-user-icon-container">
            <div class="vertical-split-line "></div>
            <div>
                <a class="glyphicon-size-middle header-item-padding" href="#">
                    <span class="glyphicon glyphicon-envelope"></span>
                </a>
            </div>
            <div class="dropdown">
                <a class="dropdown-toggle header-item-padding"
                   data-toggle="dropdown" href title="Create New...">
                    <span class="glyphicon glyphicon-plus glyphicon-size-middle"></span>
                </a>
                <ul class="dropdown-menu dropdown-menu-custom" role="menu">
                    <a class="dropdown-item btn btn-align-left" data-toggle="modal" data-target="#JobSheet">记录工作</a>
                    <a class="dropdown-item btn btn-align-left">新建维护</a>
                    <a class="dropdown-item btn btn-align-left">新建任务</a>
                    <a class="dropdown-item btn btn-align-left">新建提醒</a>
                    <a class="dropdown-item btn btn-align-left">新建活动</a>
                    <div class="dropdown-split-line" href="/"></div>
                    <a class="dropdown-item btn btn-align-left" data-toggle="modal"
                       data-target="#CreateProject">新建项目</a>
                </ul>
            </div>
            <div class="dropdown">
                <a class="header-item-padding dropdown-toggle" data-toggle="dropdown">
                    <img class="user-icon" src="/public/header0.png"/>
                </a>
                <a class="caret"></a>
                <ul class="dropdown-menu dropdown-menu-custom" role="menu">
                    <div class="dropdown-menu-header">
                        <strong class="">
                            {{PMCtrl.account}}
                        </strong>
                    </div>
                    <div class="dropdown-split-line"></div>
                    <a class="dropdown-item" href>状态一览</a>
                    <a class="dropdown-item" href>工作记录</a>
                    <a class="dropdown-item" href>资料管理</a>
                    <a class="dropdown-item" href>账号设置</a>
                    <div class="dropdown-split-line" href></div>
                    <a class="dropdown-item" href="/sysconfig">系统设置</a>
                    <a class="dropdown-item" href>注销</a>
                </ul>
            </div>
        </div>
    </div>
</header>
<div class="main-area" ng-view="">
</div>

<!--工作记录填写对话框 start-->
<div class="modal fade" id="JobSheet" ng-controller="RecodeController as RecodeCtrl">
    <div class="modal-dialog size-jobsheet">
        <div class="modal-content">
            <!-- 标题 -->
            <div class="modal-header dialog-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title title-h4">添加工作记录</h4>
            </div>
            <!-- 内容 -->
            <div class="modal-body dialog-body">
                <div class="container">
                    <!-- 状态选择区 -->
                    <div class="row">
                        <div class="function-select-area item-border">
                            <!--项目选择-->
                            <div class="col-md-3 function-select-item item-border">
                                <p class="title-h8">项目</p>
                                <div class="function-select-area-projects">
                                    <span class="glyphicon glyphicon-list-alt"></span>
                                    <a class="title-h7 dropdown-toggle" href data-toggle="dropdown"
                                       ng-click="RecodeCtrl.getProjects()">
                                        {{RecodeCtrl.selectedProject.enName}}
                                    </a>
                                    <ul class="dropdown-menu" role="menu">
                                        <div class="dropdown-item btn btn-align-left function-select-item-item"
                                             ng-repeat="project in RecodeCtrl.projects">
                                            <img src="/public/project-type-gongcheng.png"
                                                 style="width: 20px;height: 20px"/>
                                            <a class="btn btn-align-left" ng-click="RecodeCtrl.projectSelect(project)">{{project.enName}}</a>
                                        </div>
                                    </ul>
                                </div>

                            </div>
                            <!--日期选择-->
                            <div class="col-md-3 function-select-item item-border">
                                <p class="title-h8">日期</p>
                                <div class="function-select-area-date">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                    <a class="title-h7 dropdown-toggle" href data-toggle="dropdown">
                                        {{RecodeCtrl.selectedDate.str}}
                                    </a>
                                    <ul class="dropdown-menu" role="menu">
                                        <div class="dropdown-item btn btn-align-left function-select-item-item"
                                             ng-repeat="date in RecodeCtrl.dates">
                                            <a class="btn btn-align-left" ng-click="RecodeCtrl.dateSelect(date)">
                                                {{date.str}}
                                            </a>
                                        </div>
                                    </ul>
                                </div>
                            </div>
                            <!--时间选择-->
                            <div class="col-md-3 function-select-item item-border">
                                <p class="title-h8">起止时间</p>
                                <div class="row function-select-area-time">
                                    <div class="col-xs-4 ">
                                        <a class="title-h7 dropdown-toggle" href="#" data-toggle="dropdown">
                                            {{RecodeCtrl.selectedStart.str}}
                                        </a>
                                        <ul class="dropdown-menu" role="menu">
                                            <div class="dropdown-item btn btn-align-left function-select-item-item"
                                                 ng-repeat="startTime in RecodeCtrl.times">
                                                <a class="btn btn-align-left" ng-click="RecodeCtrl.sTimeSelect(startTime)">{{startTime.str}}</a>
                                            </div>
                                        </ul>
                                    </div>
                                    <i class="col-xs-1">
                                        -
                                    </i>
                                    <div class="col-xs-4">
                                        <a class="title-h7 dropdown-toggle" href="#" data-toggle="dropdown">
                                            {{RecodeCtrl.selectedEnd.str}}
                                        </a>
                                        <ul class="dropdown-menu" role="menu">
                                            <div class="dropdown-item btn btn-align-left function-select-item-item"
                                                 ng-repeat="endTime in RecodeCtrl.times">
                                                <a class="btn btn-align-left" ng-click="RecodeCtrl.eTimeSelect(endTime)">{{endTime.str}}</a>
                                            </div>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <!--类型选择-->
                            <div class="col-md-3 function-select-item item-border">
                                <p class="title-h8">类型</p>
                                <div class="function-select-area-type">
                                    <span class="glyphicon glyphicon-tag"></span>
                                    <a class="title-h7 dropdown-toggle" href="#" data-toggle="dropdown">
                                        {{RecodeCtrl.selectedType}}
                                    </a>
                                    <ul class="dropdown-menu" role="menu">
                                        <div class="dropdown-item btn btn-align-left function-select-item-item">
                                            <a class="btn btn-align-left" ng-click="RecodeCtrl.typeSelect('技术')">技术</a>
                                        </div>
                                        <div class="dropdown-item btn btn-align-left function-select-item-item">
                                            <a class="btn btn-align-left" ng-click="RecodeCtrl.typeSelect('管理')">管理</a>
                                        </div>
                                        <div class="dropdown-item btn btn-align-left function-select-item-item">
                                            <a class="btn btn-align-left" ng-click="RecodeCtrl.typeSelect('维护')">维护</a>
                                        </div>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 内容填写区 -->
                    <div class="row" style="padding-top: 1em">
                        <div class="function-recode-area item-border">
                            <div class="summernote" id="recode-editor">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 页脚 -->
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" ng-click="RecodeCtrl.recodeSubmit()">Save</button>
            </div>
        </div>
    </div>
</div>
<!--工作记录填写对话框 end-->

<!--创建项目对话框 start-->
<div class="modal fade" id="CreateProject" ng-controller="CreateProjectCtrl as CPCtrl">
    <div class="modal-dialog size-CreateProject">
        <div class="modal-content">
            <!--标题-->
            <div class="modal-header dialog-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title title-h4">创建新项目</h4>
            </div>
            <!--内容-->
            <div class="modal-body dialog-body">
                <section class="process">
                    <ul class="nav nav-pills">
                        <li role="presentation" ng-class="{active: CPCtrl.isSelectedTab(1)}">
                            <a href ng-click="CPCtrl.selectTab(1)">创建项目</a>
                        </li>
                        <li role="presentation" ng-class="{active: CPCtrl.isSelectedTab(2)}">
                            <a href ng-click="CPCtrl.selectTab(2)">添加项目成员</a>
                        </li>
                        <li role="presentation" ng-class="{active: CPCtrl.isSelectedTab(3)}">
                            <a href ng-click="CPCtrl.selectTab(3)">设置审批权限</a>
                        </li>
                    </ul>
                    <div class="create-content-area">
                        <div class="panel project-edit-info-area" ng-show="CPCtrl.isSelectedTab(1)">
                            <div class="icon-project">
                                <img src="/public/illustration.png"/>
                            </div>
                            <div class="horizontal-line"></div>
                            <div class="form-field">
                                <input class="form-control" required="" type="text" placeholder="项目全称"
                                       ng-model="CPCtrl.projectModule.cnName"/>
                            </div>
                            <div class="form-field">
                                <input class="form-control" required="" type="text" placeholder="项目简称"
                                       ng-model="CPCtrl.projectModule.enName"/>
                            </div>
                            <div class="input-group form-field">
                                <input class="form-control" required="" type="text" placeholder="项目类型"
                                       ng-model="CPCtrl.projectModule.type"/>
                                <div class="input-group-btn">
                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="true">
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-right">
                                        <div class="dropdown-item btn btn-align-left function-select-item-item">
                                            <img src="/public/project-type-gongcheng.png"
                                                 style="width: 20px;height: 20px"/>
                                            <a class="btn btn-align-left" ng-click="CPCtrl.selectedPType('工程')">工程类</a>
                                        </div>
                                        <div class="dropdown-item btn btn-align-left function-select-item-item">
                                            <img src="/public/project-type-ziyan.png"
                                                 style="width: 20px;height: 20px"/>
                                            <a class="btn btn-align-left" ng-click="CPCtrl.selectedPType('自研')">自研类</a>
                                        </div>
                                    </ul>
                                </div>
                            </div>
                            <div class="form-field">
                                <textarea class="form-control fix-textarea" role="textbox" placeholder="项目介绍"
                                          ng-model="CPCtrl.projectModule.about"></textarea>
                            </div>
                        </div>
                        <div class="panel project-edit-info-area" ng-show="CPCtrl.isSelectedTab(2)">
                            <div class="form-field" style="margin-top: 50px">
                                <input class="form-control" required="" type="text" placeholder="请输入成员姓名，确认按回车"
                                       ng-model="CPCtrl.newMemberName"
                                       ng-keydown="CPCtrl.addNewMember($event, CPCtrl.newMemberName)"
                                />
                            </div>
                            <div ng-hide="CPCtrl.projectModule.members.length > 1">
                                <div class="icon-project">
                                    <img src="/public/illustration-baton.png"/>
                                </div>
                                <p>现在项目中只有你一个,</p>
                                <p>你可以在此邀请你的小伙伴一起协作。</p>
                            </div>
                            <div ng-show="CPCtrl.projectModule.members.length > 1" class="form-field"
                                 style="max-height: 350px; overflow: auto; width: 370px">
                                <div ng-repeat="member in CPCtrl.projectModule.members" ng-show="member.showInMembers"
                                     style="padding-bottom: 8px; margin: 0 auto; width: 350px">
                                    <div>
                                        <img style="width: 35px;height: 35px; border-radius: 5px"
                                             src="/public/12312312.jpg"/>
                                        <label style="font-family: 'Microsoft Yahei'; font-size: 1.2em; font-weight: 500;width: 100px;">{{member.name}}</label>
                                        <label style="font-family: 'Microsoft Yahei'; font-size: 0.9em; color:grey; font-weight: 500; width: 100px;">@{{member.account}}</label>
                                        <button class="btn btn-default ls5px" style="margin: 0 0 0 35px;"
                                                style="font-size: 1em; font-family: 'Microsoft Yahei'; font-weight: 500; color: grey;"
                                                ng-click="CPCtrl.rmMember(member.account)">
                                            删除
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel project-edit-info-area" ng-show="CPCtrl.isSelectedTab(3)">
                            <div class="form-field"
                                 style="height: 480px; max-height: 580px; overflow: auto; width: 590px">
                                <div ng-repeat="member in CPCtrl.projectModule.members" ng-show="member.showInMembers"
                                     style="padding-bottom: 8px; margin: 0 auto; width: 570px">
                                    <div>
                                        <img style="width: 35px;height: 35px; border-radius: 5px"
                                             src="/public/12312312.jpg"/>
                                        <label style="font-family: 'Microsoft Yahei'; font-size: 1.2em; font-weight: 500;width: 100px;">{{member.name}}</label>
                                        <label style="font-family: 'Microsoft Yahei'; font-size: 0.9em; color:grey; font-weight: 500; width: 100px;">@{{member.account}}</label>
                                        <div class="btn-group" style="margin: 0 5px 0 170px;">
                                            <button type="button" class="btn btn-default dropdown-toggle"
                                                    data-toggle="dropdown"
                                                    style="font-size: 1em; font-family: 'Microsoft Yahei'; font-weight: 500; color: grey;">
                                                {{CPCtrl.getPermissionName(member.permission)}} <span
                                                    class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu" role="menu">
                                                <li><a href style="font-family: 'Microsoft Yahei'; font-size: 1em;"
                                                       ng-click="CPCtrl.selectedMemberPermission(member, '1')">审核</a>
                                                </li>
                                                <li><a href style="font-family: 'Microsoft Yahei'; font-size: 1em;"
                                                       ng-click="CPCtrl.selectedMemberPermission(member, '0')">普通</a>
                                                </li>
                                            </ul>
                                        </div>
                                        <button class="btn btn-default ls5px"
                                                style="font-size: 1em; font-family: 'Microsoft Yahei'; font-weight: 500; color: grey;"
                                                ng-click="CPCtrl.rmMember(member.account)">
                                            删除
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel project-edit-info-area" ng-show="CPCtrl.isSelectedTab(4)">
                            <h1 style="color: #3385ff; margin: 200px 0 0 200px">
                                项目创建成功
                            </h1>
                        </div>
                    </div>
                </section>
            </div>
            <!--页脚-->
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-default" ng-click="CPCtrl.back()">上一步</button>
                <button type="button" class="btn btn-default" ng-click="CPCtrl.forward()"
                        ng-hide="CPCtrl.isSelectedTab(3) || CPCtrl.isSelectedTab(4)">下一步
                </button>
                <button type="button" class="btn btn-primary"
                        ng-show="CPCtrl.isSelectedTab(3)" ng-click="CPCtrl.createProject(CPCtrl.projectModule)">创建
                </button>
                <button type="button" class="btn btn-primary" data-dismiss="modal"
                        ng-show="CPCtrl.isSelectedTab(4)">完成
                </button>
            </div>
        </div>
    </div>
</div>
<!--创建项目对话框 end-->

<script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/bower_components/summernote/dist/summernote.js"></script>
<script type="text/javascript" src="/bower_components/angular/angular.js"></script>
<script type="text/javascript" src="/bower_components/angular-route/angular-route.js"></script>
<script type="text/javascript" src="/bower_components/angular-cookies/angular-cookies.min.js"></script>
<script type="text/javascript" src="/bower_components/angular-animate/angular-animate.js"></script>
<script type="text/javascript" src="/scripts/angular/pmsoft/module.js"></script>
<script type="text/javascript" src="/scripts/angular/pmsoft/config.js"></script>
<script type="text/javascript" src="/scripts/angular/pmsoft/router.js"></script>
<script type="text/javascript" src="/scripts/angular/pmsoft/run.js"></script>
<script type="text/javascript" src="/scripts/angular/pmsoft/mainform-controller.js"></script>
<script type="text/javascript" src="/scripts/angular/pmsoft/createproject-controller.js"></script>
<script type="text/javascript" src="/scripts/angular/pmsoft/jobrecode-controller.js"></script>
<script type="text/javascript" src="/scripts/angular/pmsoft/services.js"></script>
<script type="text/javascript" src="/lib/ngStorage.js"></script>
<script type="text/javascript" src="/scripts/jqueryFn.js"></script>
</body>
</html>